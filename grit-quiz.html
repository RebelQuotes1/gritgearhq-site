<!-- ‚úÖ PAGE BACKGROUND (add once per page; <head> preferred) -->
<style>
  html,body{height:100%}
  body{
    margin:0;
    color:#e8edf2;
    background:#0b0f12 url('images/s-l1600.webp') center/cover fixed no-repeat; /* update path if needed */
  }
  body::before{
    content:""; position:fixed; inset:0;
    background:linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.7));
    pointer-events:none; z-index:-1;
  }
</style>

<!-- ============= GRIT QUIZ (fixed) ============= -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1532367766505583" crossorigin="anonymous"></script>
<section id="grit-quiz" class="mcq-wrap" tabindex="-1" aria-labelledby="grit-quiz-title">
  <style>
    .mcq-wrap{
      --panel:#121821;--line:#1f2a35;--ink:#e8edf2;--accent:#ff7a00;
      color:var(--ink);max-width:980px;margin:28px auto;
      border:1px solid var(--line);border-radius:16px;
      box-shadow:0 0 0 1px rgba(255,122,0,.12),0 16px 46px rgba(0,0,0,.6);
      background:rgba(18,24,33,.92);              /* solid panel (no image) */
      backdrop-filter:saturate(110%) blur(1px);
      padding:clamp(18px,3.2vw,28px);
    }
    .mcq-head h2{margin:0 0 8px;font:800 clamp(20px,3.2vw,28px)/1.2 system-ui,Segoe UI,Inter,sans-serif}
    .mcq-sub{color:#c9d2da;margin:0 0 14px}
    .mcq-progress{height:10px;background:#0f141a;border:1px solid var(--line);border-radius:999px;overflow:hidden}
    .mcq-progress .bar{height:100%;width:0;background:linear-gradient(180deg,#ff7a00,#e06100)}
    .mcq-meta{display:flex;gap:14px;align-items:center;color:#b6c0ca;font-size:.95rem;margin-top:8px}

    .mcq-card{margin-top:16px;background:var(--panel);border:1px solid var(--line);border-radius:14px;overflow:hidden}
    .mcq-q{padding:16px 16px 8px;border-bottom:1px solid var(--line);font-weight:700}
    .mcq-choices{display:grid;gap:10px;padding:14px}
    .mcq-choice{position:relative;border:1px solid #273446;background:#0f141a;border-radius:10px;padding:12px 14px;cursor:pointer;transition:transform .08s,box-shadow .08s}
    .mcq-choice:focus-within{outline:2px solid #2a3b50}
    .mcq-choice input{position:absolute;opacity:0;pointer-events:none}
    .mcq-choice .txt{display:flex;gap:10px;align-items:flex-start}
    .mcq-choice .bullet{width:20px;height:20px;border-radius:50%;border:2px solid #314357;margin-top:1px;flex-shrink:0}
    .mcq-choice.selected .bullet{background:linear-gradient(180deg,#ff7a00,#e06100);border-color:#e06100}
    .mcq-choice.correct{border-color:#1f6d3f;background:#0e1a14}
    .mcq-choice.wrong{border-color:#7a2c2c;background:#1a0f0f}

    .mcq-actions{display:flex;justify-content:space-between;gap:10px;padding:12px;border-top:1px solid var(--line);background:#0f141a}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;font-weight:900;letter-spacing:.3px;border:0;cursor:pointer}
    .btn:disabled{opacity:.55;cursor:not-allowed}
    .btn-primary{background:linear-gradient(180deg,#ff7a00,#e06100);color:#101318;box-shadow:0 8px 30px rgba(255,122,0,.28)}
    .btn-ghost{background:#1a232e;color:#e6edf4;border:1px solid #2a3543}

    .mcq-result{margin-top:16px;background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:16px}
    .mcq-result h3{margin:0 0 8px;font-size:1.25rem}
    .score-big{font-size:1.2rem;font-weight:800;margin-bottom:6px}
    .tier-line{color:#c9d2da;margin-bottom:10px}
    .fixes{margin:12px 0 6px;padding-left:18px}
    .fixes li{color:#d9e0e7;margin:.25rem 0}
    .mcq-ctas{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .mcq-cta{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;font-weight:900;letter-spacing:.3px;background:linear-gradient(180deg,#ff7a00,#e06100);color:#101318;text-decoration:none}
    .mcq-cta.ghost{background:#1a232e;color:#e6edf4;border:1px solid #2a3543}
    .hidden{display:none}
  </style>

  <header class="mcq-head">
    <h2 id="grit-quiz-title">Grit Check: Are You Ant or Grasshopper?</h2>
    <p class="mcq-sub">12 quick questions. Score live. Tailored next steps at the end.</p>
    <div class="mcq-progress" aria-hidden="true"><div class="bar" id="mcq-bar"></div></div>
    <div class="mcq-meta"><span id="mcq-score">Score: 0</span> ¬∑ <span id="mcq-count">Q 1/12</span></div>
  </header>

  <!-- Question card -->
  <div class="mcq-card" aria-live="polite">
    <div class="mcq-q" id="mcq-qtext">Loading‚Ä¶</div>
    <div class="mcq-choices" id="mcq-choices"></div>
    <div class="mcq-actions">
      <button class="btn btn-ghost" id="mcq-prev" type="button" disabled>‚Üê Back</button>
      <button class="btn btn-primary" id="mcq-next" type="button" disabled>Next ‚Üí</button>
    </div>
  </div>

  <!-- Results -->
  <section class="mcq-result hidden" id="mcq-result" tabindex="-1" aria-labelledby="mcq-result-title">
    <h3 id="mcq-result-title">Your Results</h3>
    <div class="score-big"><span id="mcq-final">0/12 (0%)</span></div>
    <div class="tier-line" id="mcq-tier">ü¶ó Grasshopper Energy ‚Äî Start with water, food, and one warm room.</div>
    <h4 style="margin:.6rem 0 .3rem">Quick fixes for what you missed</h4>
    <ul class="fixes" id="mcq-fixes"></ul>
    <div class="mcq-ctas"></div>
  </section>

  <script>
  (function(){
    // ---------- Quiz Data (varied) ----------
    const qs = [
      { q:"Cold house, limited fuel. What‚Äôs your FIRST move?",
        choices:[
          {t:"Crank heat for the whole house",correct:false},
          {t:"Warm the PERSON: hat, socks, layers",correct:true},
          {t:"Open windows for an hour",correct:false},
          {t:"Heat the biggest room",correct:false}
        ], tag:"heat" },
      { q:"Emergency water for one week:",
        choices:[
          {t:"1 gallon per person per day √ó 7",correct:true},
          {t:"A couple bottles per person",correct:false},
          {t:"Only if the tap stops",correct:false},
          {t:"Water isn‚Äôt a winter priority",correct:false}
        ], tag:"water" },
      { q:"No filter but you have a pot. Safer water is made by:",
        choices:[
          {t:"Rolling boil 1 minute",correct:true},
          {t:"Add random household chemical",correct:false},
          {t:"Let it sit overnight",correct:false},
          {t:"T-shirt strain only",correct:false}
        ], tag:"boil" },
      { q:"A friend shows up empty-handed during a shortage. Best line:",
        choices:[
          {t:"‚ÄúI‚Äôm out‚Äîgo away.‚Äù",correct:false},
          {t:"‚ÄúI can‚Äôt help you at my door. Please leave.‚Äù",correct:true},
          {t:"‚ÄúCome in and we‚Äôll talk.‚Äù",correct:false},
          {t:"Silence and lights off",correct:false}
        ], tag:"boundary" },
      { q:"Walking at night; someone mirrors your turns. First move:",
        choices:[
          {t:"Confront them",correct:false},
          {t:"Change route to a bright, busy place; create distance",correct:true},
          {t:"Ignore it",correct:false},
          {t:"Flash a weapon",correct:false}
        ], tag:"awareness" },
      { q:"3 AM knock at your door. Smart play:",
        choices:[
          {t:"Open with chain on",correct:false},
          {t:"Keep barrier closed; speak through door; call 911 if needed",correct:true},
          {t:"Go outside to check",correct:false},
          {t:"Shout threats outside",correct:false}
        ], tag:"home" },
      { q:"Inside during an earthquake:",
        choices:[
          {t:"Stand in a doorway",correct:false},
          {t:"Drop, Cover, Hold On under a sturdy table",correct:true},
          {t:"Run outside",correct:false},
          {t:"Use the elevator",correct:false}
        ], tag:"eq" },
      { q:"Tornado warning‚Äîwhere do you shelter?",
        choices:[
          {t:"Top floor near a window",correct:false},
          {t:"Small interior room on lowest level/basement",correct:true},
          {t:"Under a highway overpass",correct:false},
          {t:"Open garage",correct:false}
        ], tag:"tornado" },
      { q:"Road ahead is flooded. Rule:",
        choices:[
          {t:"Drive through slowly",correct:false},
          {t:"Turn around, don‚Äôt drown",correct:true},
          {t:"Follow the biggest truck",correct:false},
          {t:"Gun it",correct:false}
        ], tag:"flood" },
      { q:"Wildfire approaching your area. Smart move:",
        choices:[
          {t:"Wait until you see flames",correct:false},
          {t:"Leave early with go-bag and two routes",correct:true},
          {t:"Soak roof and stay",correct:false},
          {t:"Assume it‚Äôll miss you",correct:false}
        ], tag:"wildfire" },
      { q:"Severe arm bleeding. First priority:",
        choices:[
          {t:"Direct pressure; call emergency services",correct:true},
          {t:"Give water and wait",correct:false},
          {t:"Remove embedded object",correct:false},
          {t:"Ice it",correct:false}
        ], tag:"bleed" },
      { q:"Cell/data are down region-wide. Best tool for alerts:",
        choices:[
          {t:"Battery/hand-crank NOAA weather radio",correct:true},
          {t:"Refresh social media",correct:false},
          {t:"Ask door-to-door",correct:false},
          {t:"Wait for TV",correct:false}
        ], tag:"comms" }
    ];

    const tips = {
      heat:"Warm the person first (layers) before heating space.",
      water:"Store 1 gal/person/day for 7 days. Rotate.",
      boil:"Rolling boil 1 minute improves clear water when you lack a filter.",
      boundary:"Practice: ‚ÄúI can‚Äôt help you at my door. Please leave.‚Äù",
      awareness:"Create distance; head to lights/people; call for help.",
      home:"Keep the barrier; talk through the door; call 911 if needed.",
      eq:"Drop, Cover, Hold On under a sturdy table away from glass.",
      tornado:"Lowest level interior room/basement; helmets/blankets help.",
      flood:"Turn around‚Äîfind higher ground.",
      wildfire:"Leave early; go-bag ready; two routes; full tank.",
      bleed:"Direct pressure first; tourniquet if trained and needed.",
      comms:"NOAA weather radio works when the grid and data don‚Äôt."
    };

    // ---------- State & elements ----------
    let i = 0, score = 0, selected = -1;
    const wrongTags = [];

    const barEl = document.getElementById('mcq-bar');
    const scoreEl = document.getElementById('mcq-score');
    const countEl = document.getElementById('mcq-count');
    const qEl = document.getElementById('mcq-qtext');
    const choicesEl = document.getElementById('mcq-choices');
    const prevBtnEl = document.getElementById('mcq-prev');
    const nextBtnEl = document.getElementById('mcq-next');
    const resultWrap = document.getElementById('mcq-result');
    const finalEl = document.getElementById('mcq-final');
    const tierEl = document.getElementById('mcq-tier');
    const fixList = document.getElementById('mcq-fixes');

    function updateMeta(){
      const pct = Math.round((i/qs.length)*100);
      barEl.style.width = pct + '%';
      scoreEl.textContent = `Score: ${score}`;
      countEl.textContent = `Q ${Math.min(i+1, qs.length)}/${qs.length}`;
      prevBtnEl.disabled = (i === 0);
      nextBtnEl.disabled = (selected === -1);
      nextBtnEl.textContent = (i === qs.length - 1) ? 'Finish ‚Üí' : 'Next ‚Üí';
    }

    function renderQuestion(idx){
      const item = qs[idx];
      qEl.textContent = item.q;
      choicesEl.innerHTML = '';
      selected = -1;

      item.choices.forEach((c, j) => {
        const w = document.createElement('label');
        w.className = 'mcq-choice';
        w.innerHTML = `
          <input type="radio" name="mcq" value="${j}" aria-label="${c.t}">
          <div class="txt"><span class="bullet" aria-hidden="true"></span> <span>${c.t}</span></div>
        `;
        w.addEventListener('click', () => {
          choicesEl.querySelectorAll('.mcq-choice').forEach(el=>el.classList.remove('selected'));
          w.classList.add('selected'); selected = j; nextBtnEl.disabled = false;
        }, {passive:true});
        choicesEl.appendChild(w);
      });

      updateMeta();
    }

    function gradeCurrent(){
      const item = qs[i];
      const correctIdx = item.choices.findIndex(c=>c.correct);
      const nodes = [...choicesEl.querySelectorAll('.mcq-choice')];
      nodes[correctIdx]?.classList.add('correct');
      if (selected !== correctIdx && selected >= 0){
        nodes[selected]?.classList.add('wrong');
        wrongTags.push(item.tag);
      } else { score++; }
    }

    function tierFor(s, total){
      const pct = Math.round((s/total)*100);
      if (s <= 4)  return { pct, title:'Grasshopper Energy', badge:'ü¶ó', line:'Start with water, food, and one warm room.' };
      if (s <= 7)  return { pct, title:'Apprentice Ant',     badge:'üîß', line:'Good start‚Äîshore up the misses.' };
      if (s <= 10) return { pct, title:'Ant',               badge:'üêú', line:'Solid baseline. Keep practicing.' };
      return              { pct, title:'Ant with a Plan',   badge:'üõ†Ô∏è', line:'Top tier. Help someone else prep early.' };
    }

    function finish(){
      document.querySelector('#grit-quiz .mcq-card')?.classList.add('hidden');
      resultWrap.classList.remove('hidden');

      const { pct, title, badge, line } = tierFor(score, qs.length);
      finalEl.textContent = `${score}/${qs.length} (${pct}%)`;
      tierEl.innerHTML = `${badge} <strong>${title}</strong> ‚Äî ${line}`;

      const uniq = [...new Set(wrongTags)];
      fixList.innerHTML = (uniq.length ? uniq : ['water','awareness','home'])
        .slice(0,4)
        .map(tag=>`<li><strong>${tag[0].toUpperCase()+tag.slice(1)}:</strong> ${tips[tag]}</li>`)
        .join('');

      const ctas = document.querySelector('#grit-quiz .mcq-ctas');
      const needHeat     = uniq.includes('heat');
      const needWater    = uniq.some(t=>['water','boil'].includes(t));
      const needDefense  = uniq.some(t=>['awareness','home','boundary'].includes(t));
      const needDisaster = uniq.some(t=>['eq','tornado','flood','wildfire','comms'].includes(t));

      ctas.innerHTML = `
        ${needDefense ? `<a class="mcq-cta" href="manifesto.html#violence-answer">‚öîÔ∏è Self-Defense Basics</a>` : ``}
        ${needWater   ? `<a class="mcq-cta" href="top-5-home-water-filters.html#filters">üíß Water & Filters</a>` : ``}
        ${needHeat    ? `<a class="mcq-cta" href="amish-winter-heat.html#amish-winter-heat">üî• Warmth That Works</a>` : ``}
        ${needDisaster? `<a class="mcq-cta ghost" href="pale-horse-prepping.html#apocalypse-guide">üåÄ Disaster Playbook</a>` : ``}
      `;

      resultWrap.scrollIntoView({ behavior:'smooth', block:'start' });
      resultWrap.focus();
    }

    nextBtnEl.addEventListener('click', () => {
      if (selected === -1) return;
      gradeCurrent();
      setTimeout(() => { if (i === qs.length - 1) finish(); else { i++; renderQuestion(i); } }, 260);
    });
    prevBtnEl.addEventListener('click', () => { if (i === 0) return; i--; renderQuestion(i); });

    // Init
    renderQuestion(i);
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' && !nextBtnEl.disabled){ nextBtnEl.click(); }});
  })();
  </script>
</section>
